(()=>{"use strict";var e={devicePixelsPerUnit:50};function t(e,t){return e+t}var i,n="#333",r="#010",o=function(){function i(e,t,i,n){this.branches=[],this.x=0,this.y=0,this.angle=e,this.depth=t,this.maxSize=i,this.size=0,this.growthRateModifier=n*(.5+.5*Math.random())}return i.prototype.advance=function(e,t){var i=this.size===this.maxSize;if(!i){var n=t*this.growthRateModifier,r=this.size;this.size=Math.min(this.size+n,this.maxSize),r===this.size&&(i=!0),this.maybeBranch(n)}this.draw(e);for(var o=0,s=this.branches;o<s.length;o++)i=s[o].advance(e,t)&&i;return i},i.prototype.maybeBranch=function(e){var t=this.size/this.maxSize;if(t<.9&&t>.1&&this.depth>0&&4.5*Math.random()<e){var n=(Math.random()>.5?1:-1)*(.25*Math.random()+.25)*Math.PI,r=this.angle+n,o=(this.maxSize-this.size)*(.33+.33*Math.random()),s=this.depth-1,a=this.size,h=new i(r,s,o,.5*this.growthRateModifier),d=this.getCoordinatesAtSize(a);h.x=d.x,h.y=d.y,this.branches.push(h)}},i.prototype.draw=function(t){var i=this.getCoordinatesAtSize(this.size);t.fillStyle=n;var o,s,a,h,d=this.getBaseOffset();t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+d.x1)*e.devicePixelsPerUnit,(this.y+d.y1)*e.devicePixelsPerUnit),t.lineTo(this.x*e.devicePixelsPerUnit,this.y*e.devicePixelsPerUnit),t.lineTo((this.x+d.x2)*e.devicePixelsPerUnit,(this.y+d.y2)*e.devicePixelsPerUnit),t.fill(),d.y1>d.y2?(o=d.x1,a=d.y1,s=d.x2,h=d.y2):(o=d.x2,a=d.y2,s=d.x1,h=d.y1),t.strokeStyle=r,t.lineWidth=1;for(var c=7;c<=10;c++)t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+o*c/10)*e.devicePixelsPerUnit,(this.y+a*c/10)*e.devicePixelsPerUnit),t.stroke();t.strokeStyle="#544",t.lineWidth=1,t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+.9*s)*e.devicePixelsPerUnit,(this.y+.9*h)*e.devicePixelsPerUnit),t.stroke(),t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+s)*e.devicePixelsPerUnit,(this.y+h)*e.devicePixelsPerUnit),t.stroke()},i.prototype.getCoordinatesAtSize=function(e){var t=e;return{x:this.x+Math.cos(this.angle)*t,y:this.y+Math.sin(this.angle)*t}},i.prototype.getBaseOffset=function(){var e=.05*this.size,t=this.angle+Math.PI/4,i=Math.cos(t)*e,n=Math.sin(t)*e,r=this.angle-Math.PI/4;return{x1:i,y1:n,x2:Math.cos(r)*e,y2:Math.sin(r)*e}},i.prototype.getTotalCount=function(){return 1+this.branches.map(function(e){return e.getTotalCount()}).reduce(t,0)},i.prototype.dispose=function(){for(var e=0,t=this.branches;e<t.length;e++)t[e].dispose();this.branches=[]},i}();!function(e){e[e.A=0]="A",e[e.AS=1]="AS",e[e.B=2]="B",e[e.C=3]="C",e[e.CS=4]="CS",e[e.D=5]="D",e[e.DS=6]="DS",e[e.E=7]="E",e[e.F=8]="F",e[e.FS=9]="FS",e[e.G=10]="G",e[e.GS=11]="GS"}(i||(i={}));var s=[i.A,i.AS,i.B,i.C,i.CS,i.D,i.DS,i.E,i.F,i.FS,i.G,i.GS],a=function(e,t){this.pitch=e,this.octave=t};function h(e){return e.concat(e.map(function(e){return e+12}))}new a(i.A,0),new a(i.CS,0),new a(i.E,0),new a(i.GS,0),new a(i.GS,1);var d,c,l,v,u,P=[i.C,i.DS,i.F,i.FS,i.G,i.AS],x=h([i.E,i.G,i.A,i.B,i.D]),f=(h(P),h(s)),m=1.5,y=0,g=!1,w=0,p=[],S=!1;function M(){u.className=u.className?"":"hidden"}function U(){var e=w;if(e<l.textContent.length){w++;var t=l.textContent.charAt(e),i=C(t);T(t.charCodeAt(0)),setTimeout(U,i)}}function C(e){v.appendChild(document.createTextNode(e));var t=e.match(/[a-z]/i)?25:100;"\n"===e&&(t=300);var i=t*(.25+.75*Math.random());return u.scrollIntoView(),i}var b,z={};function T(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=x);var n=(!b&&S&&(b=new(window.AudioContext||window.webkitAudioContext)),b);if(!(t&&z[e]||!n)){var r=n.createOscillator(),o=n.createGain();o.gain.value=.25,r.type="sawtooth",r.frequency.value=220*Math.pow(2,i[e%i.length]/12),r.connect(o).connect(n.destination),r.start(n.currentTime),t?z[e]=function(){return r.stop(n.currentTime)}:r.stop(n.currentTime+.05)}}function A(){!function(){for(var e=0,t=p;e<t.length;e++)t[e].dispose();p.length=0,c.reset()}(),E(),g||requestAnimationFrame(k)}function E(){var t=window.devicePixelRatio;e.devicePixelsPerUnit=50*t,d.width=window.innerWidth*t,d.height=window.innerHeight*t;var i=1/t;d.style.transform="scale("+i+","+i+")",function(){c.fillStyle=n,c.fillRect(0,d.height-e.devicePixelsPerUnit*m,d.width,e.devicePixelsPerUnit*m),c.strokeStyle=r,c.lineWidth=1;for(var t=[4,12,16,18,19,20],i=0;i<t.length;i++)c.beginPath(),c.moveTo(0,d.height-m*e.devicePixelsPerUnit*t[i]/20),c.lineTo(d.width,d.height-m*e.devicePixelsPerUnit*t[i]/20),c.stroke()}(),function(){for(var t=Math.max(15,d.width/e.devicePixelsPerUnit*1.3),i=[],n=0;n<t;n++)i.push(Math.random());for(i.sort(),n=i.length-1;n>=0;n--){var r=(.25*Math.random()+1.375)*Math.PI,s=3+Math.round(2*Math.random()),a=d.height/e.devicePixelsPerUnit*(1-i[n]),h=new o(r,s,a*(1-Math.random()*Math.random()*.5),1-i[n]);h.x=d.width*Math.random()/e.devicePixelsPerUnit,h.y=d.height/e.devicePixelsPerUnit-i[n]*m,p.push(h)}}()}function k(e){g=!0;for(var t=(e-y)/1e3*3,i=!0,n=0,r=p;n<r.length;n++)i=r[n].advance(c,t)&&i;y=e,i?g=!1:requestAnimationFrame(k)}function B(){var e=Math.floor(26*Math.random()).toString(16);1===e.length&&(e="0"+e),(new Date).getMilliseconds()%500<250?document.body.style.backgroundColor=e+"0000":document.body.style.backgroundColor="00"+e+"00"}function F(e){S=!0,e.repeat||(T(e.which,!0,f),8===e.which&&v.lastChild&&v.lastChild.remove())}function G(e){if(!e.repeat){var t=String.fromCharCode(e.which);13===e.which?C("\r\n"):C(t)}}function I(e){var t=e.which,i=z[t];i&&(delete z[t],i())}function D(){S=!0}function L(){for(var e in z)z.hasOwnProperty(e)&&z[e]();z={}}addEventListener("load",function(){d=document.getElementById("spike-field"),c=d.getContext("2d"),l=document.getElementById("content-full"),v=document.getElementById("content-text"),u=document.getElementById("cursor"),E(),addEventListener("resize",A),requestAnimationFrame(k),setInterval(B,.25),setInterval(M,500);var e=window.location.hash;e&&(l.innerText=unescape(e.substring(1))),U(),document.body.addEventListener("keypress",G),document.body.addEventListener("keydown",F),document.body.addEventListener("keyup",I),document.body.addEventListener("pointerdown",D),window.addEventListener("blur",L)})})();
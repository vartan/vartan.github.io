(()=>{"use strict";var e={devicePixelsPerUnit:50};function t(e,t){return e+t}var i,n,r,o,s,a="#333",h="#010",d=function(){function i(e,t,i,n){this.branches=[],this.x=0,this.y=0,this.angle=e,this.depth=t,this.maxSize=i,this.size=0,this.growthRateModifier=n*(.5+.5*Math.random())}return i.prototype.advance=function(e,t){var i=this.size===this.maxSize;if(!i){var n=t*this.growthRateModifier,r=this.size;this.size=Math.min(this.size+n,this.maxSize),r===this.size&&(i=!0),this.maybeBranch(n)}this.draw(e);for(var o=0,s=this.branches;o<s.length;o++)i=s[o].advance(e,t)&&i;return i},i.prototype.maybeBranch=function(e){var t=this.size/this.maxSize;if(t<.9&&t>.1&&this.depth>0&&4.5*Math.random()<e){var n=(Math.random()>.5?1:-1)*(.25*Math.random()+.25)*Math.PI,r=this.angle+n,o=(this.maxSize-this.size)*(.33+.33*Math.random()),s=this.depth-1,a=this.size,h=new i(r,s,o,.5*this.growthRateModifier),d=this.getCoordinatesAtSize(a);h.x=d.x,h.y=d.y,this.branches.push(h)}},i.prototype.draw=function(t){var i=this.getCoordinatesAtSize(this.size);t.fillStyle=a;var n,r,o,s,d=this.getBaseOffset();t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+d.x1)*e.devicePixelsPerUnit,(this.y+d.y1)*e.devicePixelsPerUnit),t.lineTo(this.x*e.devicePixelsPerUnit,this.y*e.devicePixelsPerUnit),t.lineTo((this.x+d.x2)*e.devicePixelsPerUnit,(this.y+d.y2)*e.devicePixelsPerUnit),t.fill(),d.y1>d.y2?(n=d.x1,o=d.y1,r=d.x2,s=d.y2):(n=d.x2,o=d.y2,r=d.x1,s=d.y1),t.strokeStyle=h,t.lineWidth=1;for(var c=7;c<=10;c++)t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+n*c/10)*e.devicePixelsPerUnit,(this.y+o*c/10)*e.devicePixelsPerUnit),t.stroke();t.strokeStyle="#544",t.lineWidth=1,t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+.9*r)*e.devicePixelsPerUnit,(this.y+.9*s)*e.devicePixelsPerUnit),t.stroke(),t.beginPath(),t.moveTo(i.x*e.devicePixelsPerUnit,i.y*e.devicePixelsPerUnit),t.lineTo((this.x+r)*e.devicePixelsPerUnit,(this.y+s)*e.devicePixelsPerUnit),t.stroke()},i.prototype.getCoordinatesAtSize=function(e){var t=e;return{x:this.x+Math.cos(this.angle)*t,y:this.y+Math.sin(this.angle)*t}},i.prototype.getBaseOffset=function(){var e=.05*this.size,t=this.angle+Math.PI/4,i=Math.cos(t)*e,n=Math.sin(t)*e,r=this.angle-Math.PI/4;return{x1:i,y1:n,x2:Math.cos(r)*e,y2:Math.sin(r)*e}},i.prototype.getTotalCount=function(){return 1+this.branches.map(function(e){return e.getTotalCount()}).reduce(t,0)},i.prototype.dispose=function(){for(var e=0,t=this.branches;e<t.length;e++)t[e].dispose();this.branches=[]},i}(),c=1.5,l=0,v=!1,u=0,P=[],x=!1;function f(){s.className=s.className?"":"hidden"}var m=g([7,10,0,2,5]),y=(g([3,6,8,9,10,1]),g([0,1,2,3,4,5,6,7,8,9,10,11]));function g(e){return e.concat(e.map(function(e){return e+12}))}function w(){var e=u;if(e<r.textContent.length){u++;var t=r.textContent.charAt(e),i=p(t);b(t.charCodeAt(0)),setTimeout(w,i)}}function p(e){o.appendChild(document.createTextNode(e));var t=e.match(/[a-z]/i)?25:100;"\n"===e&&(t=300);var i=t*(.25+.75*Math.random());return s.scrollIntoView(),i}var M,U={};function b(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=m);var n=(!M&&x&&(M=new(window.AudioContext||window.webkitAudioContext)),M);if(!(t&&U[e]||!n)){var r=n.createOscillator(),o=n.createGain();o.gain.value=.25,r.type="sawtooth",r.frequency.value=220*Math.pow(2,i[e%i.length]/12),r.connect(o).connect(n.destination),r.start(n.currentTime),t?U[e]=function(){return r.stop(n.currentTime)}:r.stop(n.currentTime+.05)}}function z(){!function(){for(var e=0,t=P;e<t.length;e++)t[e].dispose();P.length=0,n.reset()}(),T(),v||requestAnimationFrame(C)}function T(){var t=window.devicePixelRatio;e.devicePixelsPerUnit=50*t,i.width=window.innerWidth*t,i.height=window.innerHeight*t;var r=1/t;i.style.transform="scale("+r+","+r+")",function(){n.fillStyle=a,n.fillRect(0,i.height-e.devicePixelsPerUnit*c,i.width,e.devicePixelsPerUnit*c),n.strokeStyle=h,n.lineWidth=1;for(var t=[4,12,16,18,19,20],r=0;r<t.length;r++)n.beginPath(),n.moveTo(0,i.height-c*e.devicePixelsPerUnit*t[r]/20),n.lineTo(i.width,i.height-c*e.devicePixelsPerUnit*t[r]/20),n.stroke()}(),function(){for(var t=Math.max(15,i.width/e.devicePixelsPerUnit*1.3),n=[],r=0;r<t;r++)n.push(Math.random());for(n.sort(),r=n.length-1;r>=0;r--){var o=(.25*Math.random()+1.375)*Math.PI,s=3+Math.round(2*Math.random()),a=i.height/e.devicePixelsPerUnit*(1-n[r]),h=new d(o,s,a*(1-Math.random()*Math.random()*.5),1-n[r]);h.x=i.width*Math.random()/e.devicePixelsPerUnit,h.y=i.height/e.devicePixelsPerUnit-n[r]*c,P.push(h)}}()}function C(e){v=!0;for(var t=(e-l)/1e3*3,i=!0,r=0,o=P;r<o.length;r++)i=o[r].advance(n,t)&&i;l=e,i?v=!1:requestAnimationFrame(C)}function S(){var e=Math.floor(26*Math.random()).toString(16);1===e.length&&(e="0"+e),(new Date).getMilliseconds()%500<250?document.body.style.backgroundColor=e+"0000":document.body.style.backgroundColor="00"+e+"00"}function k(e){x=!0,e.repeat||(b(e.which,!0,y),8===e.which&&o.lastChild&&o.lastChild.remove())}function E(e){if(!e.repeat){var t=String.fromCharCode(e.which);13===e.which?p("\r\n"):p(t)}}function I(e){var t=e.which,i=U[t];i&&(delete U[t],i())}function A(){x=!0}function B(){for(var e in U)U.hasOwnProperty(e)&&U[e]();U={}}addEventListener("load",function(){i=document.getElementById("spike-field"),n=i.getContext("2d"),r=document.getElementById("content-full"),o=document.getElementById("content-text"),s=document.getElementById("cursor"),T(),addEventListener("resize",z),requestAnimationFrame(C),setInterval(S,.25),setInterval(f,500);var e=window.location.hash;e&&(r.innerText=unescape(e.substring(1))),w(),document.body.addEventListener("keypress",E),document.body.addEventListener("keydown",k),document.body.addEventListener("keyup",I),document.body.addEventListener("pointerdown",A),window.addEventListener("blur",B)})})();